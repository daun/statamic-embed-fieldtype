const{resolveComponent:s,createElementBlock:p,openBlock:f,createVNode:c,createCommentVNode:b,withCtx:v,normalizeStyle:_}=window.Vue;var y=g;function g(e,t,l){var n=null,o=null,r=function(){n&&(clearTimeout(n),o=null,n=null)},u=function(){var i=o;r(),i&&i()},a=function(){if(!t)return e.apply(this,arguments);var i=this,d=arguments,m=l&&!n;if(r(),o=function(){e.apply(i,d)},n=setTimeout(function(){if(n=null,!m){var h=o;return o=null,h()}},t),m)return o()};return a.cancel=r,a.flush=u,a}const{Fieldtype:U,IndexFieldtype:k,FieldtypeMixin:I,IndexFieldtypeMixin:x,DateFormatter:C,ItemActions:H,requireElevatedSession:L,requireElevatedSessionIf:M}=__STATAMIC__.core,w=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},E={mixins:[I],data(){return{embedInfo:{}}},computed:{info(){return this.embedInfo[this.value]||{}},embedHtml(){return this.info?.html},embedRatio(){const e=this.info?.width||16,t=this.info?.height||9;return e/t},loadEmbedInfoDebounced(){return y(this.loadEmbedInfo,300)}},methods:{loadEmbedInfo(e){this.isUrl(e)&&this.$axios.post(this.meta.route,{url:e}).then(({data:t={}})=>{this.embedInfo[e]=t})},isUrl(e){if(!e)return!1;try{const{protocol:t}=new URL(e);return["http:","https:"].includes(t)}catch{return!1}}},created(){this.value&&this.meta.info&&(this.embedInfo[this.value]=this.meta.info)},watch:{value:{immediate:!0,handler(e){setTimeout(()=>{this.loadEmbedInfoDebounced(e)})}}}},F={class:"flex flex-col space-y-2 p-2 bg-gray-50 border border-gray-300 dark:bg-transparent dark:border-gray-700 rounded-xl"},R=["innerHTML"];function $(e,t,l,n,o,r){const u=s("ui-input-group-prepend"),a=s("ui-input"),i=s("ui-input-group");return f(),p("div",F,[c(i,null,{default:v(()=>[c(u,{text:e.__("URL")},null,8,["text"]),c(a,{"model-value":e.value,isReadOnly:e.isReadOnly,placeholder:e.__(e.config.placeholder)||"https://","aria-label":e.__("Content URL"),"onUpdate:modelValue":e.update,onFocus:t[0]||(t[0]=d=>e.$emit("focus")),onBlur:t[1]||(t[1]=d=>e.$emit("blur")),"input-class":"border-s-0"},null,8,["model-value","isReadOnly","placeholder","aria-label","onUpdate:modelValue"])]),_:1}),r.embedHtml?(f(),p("div",{key:0,innerHTML:r.embedHtml,class:"relative aspect-(--embed-ratio) overflow-hidden rounded-lg [&_iframe]:w-full [&_iframe]:h-full [&_iframe]:border-0",style:_(`--embed-ratio: ${r.embedRatio}`)},null,12,R)):b("",!0)])}const T=w(E,[["render",$]]);Statamic.$components.register("embed-fieldtype",T);
