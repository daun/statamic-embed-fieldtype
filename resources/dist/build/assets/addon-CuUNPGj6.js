const{resolveComponent:m,createElementBlock:a,openBlock:l,createVNode:h,createCommentVNode:u,withCtx:y,normalizeStyle:v,createElementVNode:p,toDisplayString:_}=window.Vue;var w=k;function k(e,t,d){var n=null,o=null,r=function(){n&&(clearTimeout(n),o=null,n=null)},c=function(){var i=o;r(),i&&i()},s=function(){if(!t)return e.apply(this,arguments);var i=this,f=arguments,b=d&&!n;if(r(),o=function(){e.apply(i,f)},n=setTimeout(function(){if(n=null,!b){var g=o;return o=null,g()}},t),b)return o()};return s.cancel=r,s.flush=c,s}const{Fieldtype:N,IndexFieldtype:O,FieldtypeMixin:x,IndexFieldtypeMixin:A,DateFormatter:B,ItemActions:q,requireElevatedSession:z,requireElevatedSessionIf:W}=__STATAMIC__.core,I=(e,t)=>{const d=e.__vccOpts||e;for(const[n,o]of t)d[n]=o;return d},E={mixins:[x],data(){return{embedInfo:{}}},computed:{info(){return this.embedInfo[this.value]||{}},embedHtml(){return this.info.html},embedRatio(){const e=this.info.width,t=this.info.height;return e&&t?e/t:16/9},loadEmbedInfoDebounced(){return w(this.loadEmbedInfo,300)}},methods:{loadEmbedInfo(e){this.isUrl(e)&&this.$axios.post(this.meta.route,{url:e}).then(({data:t={}})=>{this.embedInfo[e]=t})},isUrl(e){if(!e)return!1;try{const{protocol:t}=new URL(e);return["http:","https:"].includes(t)}catch{return!1}},formatHostname(e){try{const{hostname:t}=new URL(e);return t.replace(/^www\d?\./,"")}catch(t){return console.error(t),e}}},created(){this.value&&this.meta.info&&(this.embedInfo[this.value]=this.meta.info)},watch:{value:{immediate:!0,handler(e){setTimeout(()=>{this.loadEmbedInfoDebounced(e)})}}}},R={class:"flex flex-col space-y-2 p-2 bg-gray-50 border border-gray-300 dark:bg-transparent dark:border-gray-700 rounded-xl"},F=["innerHTML"],U={key:1,class:"overflow-hidden bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg"},T=["src"],L={class:"px-3 py-2.5 grid gap-0.5 text-sm"},S={class:"line-clamp-1 font-semibold text-gray-800 dark:text-gray-200"},V=["href"],C={key:0,class:"line-clamp-1 text-gray-500 dark:text-gray-400"},D={key:1,class:"text-gray-400 dark:text-gray-600"};function H(e,t,d,n,o,r){const c=m("ui-input-group-prepend"),s=m("ui-input"),i=m("ui-input-group");return l(),a("div",R,[h(i,null,{default:y(()=>[h(c,{text:e.__("URL")},null,8,["text"]),h(s,{"model-value":e.value,isReadOnly:e.isReadOnly,placeholder:e.__(e.config.placeholder)||"https://","aria-label":e.__("Content URL"),"onUpdate:modelValue":e.update,onFocus:t[0]||(t[0]=f=>e.$emit("focus")),onBlur:t[1]||(t[1]=f=>e.$emit("blur")),"input-class":"border-s-0"},null,8,["model-value","isReadOnly","placeholder","aria-label","onUpdate:modelValue"])]),_:1}),r.info.html?(l(),a("div",{key:0,innerHTML:r.info.html,class:"relative aspect-(--embed-ratio) overflow-hidden rounded-lg [&_iframe]:w-full [&_iframe]:h-full [&_iframe]:border-0",style:v(`--embed-ratio: ${r.embedRatio}`)},null,12,F)):r.info.title?(l(),a("article",U,[r.info.image?(l(),a("img",{key:0,src:r.info.image,class:"w-full h-auto"},null,8,T)):u("",!0),p("div",L,[p("p",S,[p("a",{href:r.info.url},_(r.info.title),9,V)]),r.info.description?(l(),a("p",C,_(r.info.description),1)):u("",!0),r.info.provider_url?(l(),a("p",D,_(r.formatHostname(r.info.provider_url)),1)):u("",!0)])])):u("",!0)])}const M=I(E,[["render",H]]);Statamic.$components.register("embed-fieldtype",M);
