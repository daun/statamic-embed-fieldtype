const{resolveComponent:m,createElementBlock:a,openBlock:i,createVNode:p,createCommentVNode:s,withCtx:v,normalizeStyle:g,createElementVNode:b,toDisplayString:h}=window.Vue;var k=w;function w(e,r,d){var n=null,o=null,t=function(){n&&(clearTimeout(n),o=null,n=null)},c=function(){var l=o;t(),l&&l()},u=function(){if(!r)return e.apply(this,arguments);var l=this,f=arguments,_=d&&!n;if(t(),o=function(){e.apply(l,f)},n=setTimeout(function(){if(n=null,!_){var y=o;return o=null,y()}},r),_)return o()};return u.cancel=t,u.flush=c,u}const{Fieldtype:N,IndexFieldtype:O,FieldtypeMixin:x,IndexFieldtypeMixin:A,DateFormatter:B,ItemActions:q,requireElevatedSession:z,requireElevatedSessionIf:W}=__STATAMIC__.core,I=(e,r)=>{const d=e.__vccOpts||e;for(const[n,o]of r)d[n]=o;return d},E={mixins:[x],data(){return{embedInfo:{}}},computed:{info(){return this.embedInfo[this.value]||{}},loadEmbedInfoDebounced(){return k(this.loadEmbedInfo,300)}},methods:{loadEmbedInfo(e){this.isUrl(e)&&this.$axios.post(this.meta.route,{url:e}).then(({data:r={}})=>{this.embedInfo[e]=r})},isUrl(e){if(!e)return!1;try{const{protocol:r}=new URL(e);return["http:","https:"].includes(r)}catch{return!1}},formatHostname(e){try{const{hostname:r}=new URL(e);return r.replace(/^www\d?\./,"")}catch(r){return console.error(r),e}}},created(){this.value&&this.meta.info&&(this.embedInfo[this.value]=this.meta.info)},watch:{value:{immediate:!0,handler(e){setTimeout(()=>{this.loadEmbedInfoDebounced(e)})}}}},F={class:"flex flex-col space-y-2 p-2 bg-gray-50 border border-gray-300 dark:bg-transparent dark:border-gray-700 rounded-xl"},U={key:0,class:"overflow-hidden bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg"},R=["innerHTML"],T=["src"],L={key:2,class:"px-3 py-2.5 grid gap-0.5 text-sm"},S={class:"line-clamp-1 font-semibold text-gray-800 dark:text-gray-200"},V=["href"],C={key:0,class:"line-clamp-1 text-gray-500 dark:text-gray-400"},D={key:1,class:"text-gray-400 dark:text-gray-600"};function M(e,r,d,n,o,t){const c=m("ui-input-group-prepend"),u=m("ui-input"),l=m("ui-input-group");return i(),a("div",F,[p(l,null,{default:v(()=>[p(c,{text:e.__("URL")},null,8,["text"]),p(u,{"model-value":e.value,isReadOnly:e.isReadOnly,placeholder:e.__(e.config.placeholder)||"https://","aria-label":e.__("Content URL"),"onUpdate:modelValue":e.update,onFocus:r[0]||(r[0]=f=>e.$emit("focus")),onBlur:r[1]||(r[1]=f=>e.$emit("blur")),"input-class":"border-s-0"},null,8,["model-value","isReadOnly","placeholder","aria-label","onUpdate:modelValue"])]),_:1}),t.info.title||t.info.embed||t.info.thumbnail?(i(),a("article",U,[t.info.embed?(i(),a("div",{key:0,innerHTML:t.info.embed.html,class:"relative aspect-(--embed-ratio) overflow-hidden [&_iframe]:w-full [&_iframe]:h-full [&_iframe]:border-0",style:g(`--embed-ratio: ${t.info.embed.ratio}`)},null,12,R)):t.info.thumbnail?(i(),a("img",{key:1,src:t.info.thumbnail.url,class:"w-full h-auto"},null,8,T)):s("",!0),t.info.title?(i(),a("div",L,[b("p",S,[b("a",{href:t.info.url},h(t.info.title),9,V)]),t.info.description||t.info.author?.name?(i(),a("p",C,h(t.info.description||t.info.author?.name),1)):s("",!0),t.info.provider?.url?(i(),a("p",D,h(t.formatHostname(t.info.provider?.url)),1)):s("",!0)])):s("",!0)])):s("",!0)])}const H=I(E,[["render",M]]);Statamic.$components.register("embed-fieldtype",H);
