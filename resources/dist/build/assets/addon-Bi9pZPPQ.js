var b=w;function w(t,r,l){var o=null,n=null,e=function(){o&&(clearTimeout(o),n=null,o=null)},u=function(){var s=n;e(),s&&s()},d=function(){if(!r)return t.apply(this,arguments);var s=this,f=arguments,v=l&&!o;if(e(),n=function(){t.apply(s,f)},o=setTimeout(function(){if(o=null,!v){var _=n;return n=null,_()}},r),v)return n()};return d.cancel=e,d.flush=u,d}const{Fieldtype:B,IndexFieldtype:N,FieldtypeMixin:R,IndexFieldtypeMixin:L,DateFormatter:z,ItemActions:W,requireElevatedSession:K,requireElevatedSessionIf:q}=__STATAMIC__.core,S=window.Vue,{BaseTransition:j,BaseTransitionPropsValidators:G,Comment:Q,DeprecationTypes:J,EffectScope:X,ErrorCodes:Y,ErrorTypeStrings:Z,Fragment:$,KeepAlive:ee,ReactiveEffect:te,Static:re,Suspense:oe,Teleport:ne,Text:ie,TrackOpTypes:ae,Transition:se,TransitionGroup:le,TriggerOpTypes:de,VueElement:ce,__esModule:ue,assertNumber:fe,callWithAsyncErrorHandling:me,callWithErrorHandling:pe,camelize:he,capitalize:ye,cloneVNode:ve,compatUtils:ge,compile:_e,computed:be,createApp:we,createBlock:Re,createCommentVNode:c,createElementBlock:i,createElementVNode:m,createHydrationRenderer:Se,createPropsRestProxy:xe,createRenderer:Te,createSSRApp:Ce,createSlots:ke,createStaticVNode:Ee,createTextVNode:Ie,createVNode:p,customRef:Me,defineAsyncComponent:Ve,defineComponent:De,defineCustomElement:Ue,defineEmits:Fe,defineExpose:He,defineModel:Oe,defineOptions:Ae,defineProps:Pe,defineSSRCustomElement:Be,defineSlots:Ne,devtools:Le,effect:ze,effectScope:We,getCurrentInstance:Ke,getCurrentScope:qe,getCurrentWatcher:je,getTransitionRawChildren:Ge,guardReactiveProps:Qe,h:Je,handleError:Xe,hasInjectionContext:Ye,hydrate:Ze,hydrateOnIdle:$e,hydrateOnInteraction:et,hydrateOnMediaQuery:tt,hydrateOnVisible:rt,initCustomFormatter:ot,initDirectivesForSSR:nt,inject:it,isMemoSame:at,isProxy:st,isReactive:lt,isReadonly:dt,isRef:ct,isRuntimeOnly:ut,isShallow:ft,isVNode:mt,markRaw:pt,mergeDefaults:ht,mergeModels:yt,mergeProps:vt,nextTick:gt,nodeOps:_t,normalizeClass:g,normalizeProps:bt,normalizeStyle:x,onActivated:wt,onBeforeMount:Rt,onBeforeUnmount:St,onBeforeUpdate:xt,onDeactivated:Tt,onErrorCaptured:Ct,onMounted:kt,onRenderTracked:Et,onRenderTriggered:It,onScopeDispose:Mt,onServerPrefetch:Vt,onUnmounted:Dt,onUpdated:Ut,onWatcherCleanup:Ft,openBlock:a,patchProp:Ht,popScopeId:Ot,provide:At,proxyRefs:Pt,pushScopeId:Bt,queuePostFlushCb:Nt,reactive:Lt,readonly:zt,ref:Wt,registerRuntimeCompiler:Kt,render:qt,renderList:jt,renderSlot:Gt,resolveComponent:h,resolveDirective:Qt,resolveDynamicComponent:Jt,resolveFilter:Xt,resolveTransitionHooks:Yt,setBlockTracking:Zt,setDevtoolsHook:$t,setTransitionHooks:er,shallowReactive:tr,shallowReadonly:rr,shallowRef:or,ssrContextKey:nr,ssrUtils:ir,stop:ar,toDisplayString:y,toHandlerKey:sr,toHandlers:lr,toRaw:dr,toRef:cr,toRefs:ur,toValue:fr,transformVNodeArgs:mr,triggerRef:pr,unref:hr,useAttrs:yr,useCssModule:vr,useCssVars:gr,useHost:_r,useId:br,useModel:wr,useSSRContext:Rr,useShadowRoot:Sr,useSlots:xr,useTemplateRef:Tr,useTransitionState:Cr,vModelCheckbox:kr,vModelDynamic:Er,vModelRadio:Ir,vModelSelect:Mr,vModelText:Vr,vShow:Dr,version:Ur,warn:Fr,watch:Hr,watchEffect:Or,watchPostEffect:Ar,watchSyncEffect:Pr,withAsyncContext:Br,withCtx:T,withDefaults:Nr,withDirectives:Lr,withKeys:zr,withMemo:Wr,withModifiers:Kr,withScopeId:qr}=S,C=(t,r)=>{const l=t.__vccOpts||t;for(const[o,n]of r)l[o]=n;return l},k={mixins:[R],data(){return{embedInfo:{}}},computed:{info(){return this.embedInfo[this.value]||{}},loadEmbedInfoDebounced(){return b(this.loadEmbedInfo,300)}},methods:{loadEmbedInfo(t){this.isUrl(t)&&this.$axios.post(this.meta.route,{url:t}).then(({data:r={}})=>{this.embedInfo[t]=r})},isUrl(t){if(!t)return!1;try{const{protocol:r}=new URL(t);return["http:","https:"].includes(r)}catch{return!1}},formatHostname(t){try{const{hostname:r}=new URL(t);return r.replace(/^www\d?\./,"")}catch(r){return console.error(r),t}}},created(){this.value&&this.meta.info&&(this.embedInfo[this.value]=this.meta.info)},watch:{value:{immediate:!0,handler(t){setTimeout(()=>{this.loadEmbedInfoDebounced(t)})}}}},E={class:"flex flex-col space-y-2 p-2 bg-gray-50 border border-gray-300 dark:bg-transparent dark:border-gray-700 rounded-xl"},I={key:0,class:"overflow-hidden bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg"},M=["innerHTML"],V=["src"],D={key:2,class:"px-4 py-3 grid gap-0.5 text-sm"},U={class:"line-clamp-1 font-semibold text-gray-800 dark:text-gray-200"},F=["href"],H={key:0,class:"line-clamp-1 text-gray-500 dark:text-gray-400"},O={key:1,class:"text-gray-400 dark:text-gray-600"};function A(t,r,l,o,n,e){const u=h("ui-input-group-prepend"),d=h("ui-input"),s=h("ui-input-group");return a(),i("div",E,[p(s,null,{default:T(()=>[p(u,{text:t.__("URL")},null,8,["text"]),p(d,{"model-value":t.value,isReadOnly:t.isReadOnly,placeholder:t.__(t.config.placeholder)||"https://","aria-label":t.__("Content URL"),"onUpdate:modelValue":t.update,onFocus:r[0]||(r[0]=f=>t.$emit("focus")),onBlur:r[1]||(r[1]=f=>t.$emit("blur")),"input-class":"border-s-0"},null,8,["model-value","isReadOnly","placeholder","aria-label","onUpdate:modelValue"])]),_:1}),e.info.title||e.info.code||e.info.image?(a(),i("article",I,[e.info.code?(a(),i("div",{key:0,class:g({"p-2 pb-0":e.info.code.borderRadius})},[m("div",{innerHTML:e.info.code.html,class:g(["relative overflow-hidden [&_iframe]:w-full! [&_iframe]:max-w-none! [&_iframe]:h-full! [&_iframe]:border-0",{"aspect-(--embed-ratio)":e.info.code.ratio,"h-(--embed-height)":e.info.code.height&&!e.info.code.ratio}]),style:x({"--embed-ratio":e.info.code.ratio,"--embed-width":`${e.info.code.width??0}px`,"--embed-height":`${e.info.code.height??0}px`})},null,14,M)],2)):e.info.image?(a(),i("img",{key:1,src:e.info.image.url,class:"w-full h-auto"},null,8,V)):c("",!0),e.info.title?(a(),i("div",D,[m("p",U,[m("a",{href:e.info.url},y(e.info.title),9,F)]),e.info.description||e.info.author?.name?(a(),i("p",H,y(e.info.description||e.info.author?.name),1)):c("",!0),e.info.provider?.url?(a(),i("p",O,y(e.formatHostname(e.info.provider?.url)),1)):c("",!0)])):c("",!0)])):c("",!0)])}const P=C(k,[["render",A]]);Statamic.$components.register("embed-fieldtype",P);
